@startuml Architecture_Model

interface Validator {
    + Validate(*Domain): error
}
note left
    Implemented by all model types.
    A reference to the domain is
    given so that validations that
    need access to another part of
    the tree can be completed.
end note

class Type {
    + t: string
}
note left
    A type defines a data type
    that is either a primitive
    type or a reference to
    another DTO by name.
end note

class PString {
    + s: string
    + file: string
    + pos: token.Pos
}
note left
    A PString wraps a string with
    information from where this
    string was extracted.
end note

' Some hidden arrows to lay out the lonely types.
Validator -[hidden]-> PString
PString -[hidden]-> Type

class Domain {
    + Name: PString
    + ArcVersion: PString
    + Description: PString
}
Domain *-- "1\r+Glossary" Glossary
Domain *-- "1..*\r+BoundedContexts" BoundedContext

class BoundedContext {
    + Name: PString
    + Description: PString
}
BoundedContext *-- "1\r+License" License
BoundedContext *-- "1\r+Authors" Authors
BoundedContext *-- "1\r+Generators" GeneratorSelection
BoundedContext *-- "1..*\r+Stories" Story
BoundedContext *-- "1\r+Glossary" Glossary
BoundedContext *-- "1\r+Core" Package
BoundedContext *-- "1..*\r+Usecases" Package

class Package {}
Package *-- "*\rArtifacts" DTO

class Authors {}
Authors *-- "1..*\r+Authors" Author

class Author {
    + Name: PString
    + Mail: PString
}

class License {
    + Name: PString
}

class Glossary {
    +Definitions: map[string]PString
}

class Story {
    + Id: int
    + Title: PString
    + AsA: PString
    + IWantTo: PString
    + SoThat: PString
}
Story *-- "1..*" AcceptCriterion

class AcceptCriterion {
    + Require: []PString
    + When: []PString
    + Then: []PString
}

class GeneratorSelection {}
GeneratorSelection *-- "0..1\r+Go" GoGenerator
GeneratorSelection *-- "0..1\r+Android" AndroidGenerator

class GoGenerator {
    + Package: PString
}
GoGenerator *-- "1\n+Build" DesktopBuild

class DesktopBuild {
    + Darwin: []PString
    + Linux: []PString
}

class AndroidGenerator {}

class DTO {
    + Name: PString
    + Fields: map[string]Type
}

class Service {}

class Executable {}

class Error {}

@enduml