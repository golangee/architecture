#! {
    type "io"

    services {
        "query"
        "manage"
    }

    libraries {
        "json"
        "http-server"
    }

    @@name="CreateRequest"
    @@view="Ticket"
    object {
        name string,
        description string,
    }

    @@name="CreateResult"
    @@view="Ticket"
    object {
        id UUID,
    }

    @@name="CloseRequest"
    @@view="Ticket"
    object {
        id UUID,
    }

    @@name="CloseError"
    error {
        TicketDoesNotExist,
        TicketAlreadyClosed,
    }

    methods {
        @@story="ticket_create"
        Create(req CreateRequest) -> (CreateResult)

        @@story="ticket_close"
        Close(req CloseRequest) -> (CloseError)
    }
}